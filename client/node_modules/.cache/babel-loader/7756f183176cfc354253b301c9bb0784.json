{"ast":null,"code":"var _jsxFileName = \"/media/vasya/Trash/files/\\u0423\\u0447\\u0435\\u0431\\u0430/\\u0428\\u041F/\\u0412\\u044B\\u043F\\u0443\\u0441\\u043A\\u043D\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442/project/client/src/components/LoginForm.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { observer } from 'mobx-react';\nimport store from '../stores/LoginStore';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Grid, TextField, Typography, Divider } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport jwt from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginForm(props) {\n  _s();\n\n  const {\n    onClose,\n    open,\n    toReg\n  } = props;\n\n  const handleClose = () => {\n    onClose();\n  };\n\n  const handleReg = () => {\n    toReg();\n    onClose();\n  };\n\n  const [messageServ, setMess] = React.useState('');\n\n  const login = async () => {\n    const stNickname = document.getElementById('name').value;\n    const stPassword = document.getElementById('password').value;\n    const user = {\n      nickname: stNickname,\n      password: stPassword\n    };\n    const response = await fetch('http://localhost:8080/api/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json;charset=utf-8'\n      },\n      body: JSON.stringify(user)\n    });\n    const result = await response.json();\n\n    if (response.status === 200) {\n      console.log(12);\n      store.jwtDecode(result);\n      onClose();\n      window.location.reload();\n    } else {\n      setMess(message);\n    }\n  };\n  /*const handleListItemClick = (value) => {\n      onClose(value);\n  };*/\n\n\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    open: open,\n    onClose: handleClose,\n    \"aria-labelledby\": \"Login\",\n    children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n      id: \"Login\",\n      children: \"\\u0412\\u0445\\u043E\\u0434\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n      children: [/*#__PURE__*/_jsxDEV(DialogContentText, {\n        children: messageServ\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        autoFocus: true,\n        margin: \"dense\",\n        id: \"name\",\n        label: \"\\u0418\\u043C\\u044F \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\",\n        fullWidth: true,\n        variant: \"outlined\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        margin: \"dense\",\n        id: \"password\",\n        label: \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n        fullWidth: true,\n        variant: \"outlined\",\n        type: \"password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleClose,\n        children: \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: login,\n        children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      display: \"flex\",\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      sx: {\n        m: 1\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        children: \"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleReg,\n        children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LoginForm, \"ltOlF+MJpf7WtyiSxOpcFgC6EdM=\");\n\n_c = LoginForm;\nexport default _c2 = observer(LoginForm);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LoginForm\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","observer","store","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Grid","TextField","Typography","Divider","Box","jwt","LoginForm","props","onClose","open","toReg","handleClose","handleReg","messageServ","setMess","useState","login","stNickname","document","getElementById","value","stPassword","user","nickname","password","response","fetch","method","headers","body","JSON","stringify","result","json","status","console","log","jwtDecode","window","location","reload","message","m"],"sources":["/media/vasya/Trash/files/Учеба/ШП/Выпускной проект/project/client/src/components/LoginForm.js"],"sourcesContent":["import React from \"react\";\nimport { observer } from 'mobx-react';\nimport store from '../stores/LoginStore';\nimport { Button, Dialog, DialogActions,DialogContent, DialogContentText, DialogTitle, Grid, TextField, Typography, Divider } from \"@mui/material\";\nimport { Box } from \"@mui/system\";\nimport jwt from 'jwt-decode';\n\nfunction LoginForm(props){\n    const { onClose, open, toReg } = props;\n\n    const handleClose = () => {\n        onClose();\n    };\n\n    const handleReg = () => {\n        toReg();\n        onClose();\n    };\n    const [messageServ, setMess] = React.useState('');\n    const login = async() => {\n        const stNickname = document.getElementById('name').value;\n        const stPassword = document.getElementById('password').value;\n        const user = {\n            nickname: stNickname, password: stPassword\n          };\n        const response = await fetch('http://localhost:8080/api/auth/login', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json;charset=utf-8'\n            },\n            body: JSON.stringify(user)\n        });\n        const result = await response.json();\n        if(response.status === 200){\n            console.log(12);\n            store.jwtDecode(result);\n            onClose();\n            window.location.reload();\n        }\n        else{\n            setMess(message);\n        }\n    }\n    /*const handleListItemClick = (value) => {\n        onClose(value);\n    };*/\n    return(\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"Login\">\n            <DialogTitle id=\"Login\">Вход</DialogTitle>\n            <DialogContent>\n                <DialogContentText>{messageServ}</DialogContentText>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"name\"\n                    label=\"Имя аккаунта\"\n                    fullWidth\n                    variant=\"outlined\"/>\n                <TextField\n                    margin=\"dense\"\n                    id=\"password\"\n                    label=\"Пароль\"\n                    fullWidth\n                    variant=\"outlined\"\n                    type=\"password\"/>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose}>Отмена</Button>\n                <Button onClick={login}>Войти</Button>\n            </DialogActions>\n            <Divider />\n            <Box \n                display=\"flex\"\n                justifyContent=\"center\"\n                alignItems=\"center\"\n                sx = {{m: 1}} >\n                    <Typography>Нет аккаунта?</Typography>\n                    <Button onClick={handleReg}>Регистрация</Button>\n            </Box>\n                \n        </Dialog>\n    )\n}\n\nexport default observer(LoginForm);"],"mappings":"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"},"metadata":{},"sourceType":"module"}