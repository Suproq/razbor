{"ast":null,"code":"import { makeObservable, action, computed, decorate, observable } from 'mobx';\nimport jwt from 'jwt-decode';\n\nclass LoginStore {\n  constructor(thisUser) {\n    this.thisUser = '';\n    this.thisUserLoggedIn = false;\n    makeObservable(this, {\n      thisUser: observable,\n      thisUserLoggedIn: observable,\n      jwtDecode: observable,\n      getNick: observable,\n      getRole: observable\n    });\n    this.thisUser = thisUser;\n  }\n\n  users() {\n    //console.log(token);\n    const token = localStorage.getItem('token');\n    console.log(token);\n    return jwt(token);\n  }\n\n  logInUser(userName) {\n    this.thisUser = userName;\n    this.thisUserLoggedIn = true;\n  }\n\n  jwtDecode(token) {\n    //console.log(token);\n    //const user = jwt(token.token);\n    //console.log(token.token);\n    localStorage.setItem('token', JSON.stringify(token.token)); //const js = JSON.parse(localStorage.getItem('token'))['access_token']\n    //console.log(localStorage.getItem('token'));\n\n    localStorage.setItem('loggedIn', 'yes'); //console.log(user);\n  }\n\n  getNick() {\n    console.log(this.users());\n    return this.users().nickname;\n  }\n\n  getRole() {\n    console.log(this.isLogged());\n    if (this.isLogged) return this.users().role;\n    return 0;\n  }\n\n  isLogged() {\n    const log = localStorage.getItem('loggedIn');\n    return log === 'yes';\n  }\n\n  logout() {\n    localStorage.setItem('loggedIn', 'no');\n  }\n\n}\n\nexport default new LoginStore();","map":{"version":3,"names":["makeObservable","action","computed","decorate","observable","jwt","LoginStore","constructor","thisUser","thisUserLoggedIn","jwtDecode","getNick","getRole","users","token","localStorage","getItem","console","log","logInUser","userName","setItem","JSON","stringify","nickname","isLogged","role","logout"],"sources":["/media/vasya/Trash/files/Учеба/ШП/Выпускной проект/project/client/src/stores/LoginStore.js"],"sourcesContent":["import {makeObservable, action, computed, decorate, observable} from 'mobx';\nimport jwt from 'jwt-decode';\n\nclass LoginStore {\n    thisUser = '';\n    thisUserLoggedIn = false;\n    constructor(thisUser) {\n        makeObservable(this, {\n            thisUser: observable,\n            thisUserLoggedIn: observable,\n            jwtDecode: observable,\n            getNick: observable,\n            getRole: observable\n        })\n        this.thisUser = thisUser\n    }\n    users(){\n        //console.log(token);\n        const token = localStorage.getItem('token');\n        console.log(token);\n        return jwt(token);\n    }\n    logInUser(userName) {\n        this.thisUser = userName;\n        this.thisUserLoggedIn = true;\n    }\n    jwtDecode(token){\n        //console.log(token);\n        //const user = jwt(token.token);\n        //console.log(token.token);\n        localStorage.setItem('token', JSON.stringify(token.token));\n        //const js = JSON.parse(localStorage.getItem('token'))['access_token']\n        //console.log(localStorage.getItem('token'));\n        localStorage.setItem('loggedIn', 'yes');\n        //console.log(user);\n    }\n    getNick(){\n        console.log(this.users());\n        return this.users().nickname;\n    }\n    getRole(){\n        console.log(this.isLogged());\n        if(this.isLogged)\n            return this.users().role;\n        return 0;\n    }\n    isLogged(){\n        const log = localStorage.getItem('loggedIn');\n        return log === 'yes';\n    }\n    logout(){\n        localStorage.setItem('loggedIn', 'no');\n    }\n}\n\nexport default new LoginStore();"],"mappings":"AAAA,SAAQA,cAAR,EAAwBC,MAAxB,EAAgCC,QAAhC,EAA0CC,QAA1C,EAAoDC,UAApD,QAAqE,MAArE;AACA,OAAOC,GAAP,MAAgB,YAAhB;;AAEA,MAAMC,UAAN,CAAiB;EAGbC,WAAW,CAACC,QAAD,EAAW;IAAA,KAFtBA,QAEsB,GAFX,EAEW;IAAA,KADtBC,gBACsB,GADH,KACG;IAClBT,cAAc,CAAC,IAAD,EAAO;MACjBQ,QAAQ,EAAEJ,UADO;MAEjBK,gBAAgB,EAAEL,UAFD;MAGjBM,SAAS,EAAEN,UAHM;MAIjBO,OAAO,EAAEP,UAJQ;MAKjBQ,OAAO,EAAER;IALQ,CAAP,CAAd;IAOA,KAAKI,QAAL,GAAgBA,QAAhB;EACH;;EACDK,KAAK,GAAE;IACH;IACA,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;IACAC,OAAO,CAACC,GAAR,CAAYJ,KAAZ;IACA,OAAOT,GAAG,CAACS,KAAD,CAAV;EACH;;EACDK,SAAS,CAACC,QAAD,EAAW;IAChB,KAAKZ,QAAL,GAAgBY,QAAhB;IACA,KAAKX,gBAAL,GAAwB,IAAxB;EACH;;EACDC,SAAS,CAACI,KAAD,EAAO;IACZ;IACA;IACA;IACAC,YAAY,CAACM,OAAb,CAAqB,OAArB,EAA8BC,IAAI,CAACC,SAAL,CAAeT,KAAK,CAACA,KAArB,CAA9B,EAJY,CAKZ;IACA;;IACAC,YAAY,CAACM,OAAb,CAAqB,UAArB,EAAiC,KAAjC,EAPY,CAQZ;EACH;;EACDV,OAAO,GAAE;IACLM,OAAO,CAACC,GAAR,CAAY,KAAKL,KAAL,EAAZ;IACA,OAAO,KAAKA,KAAL,GAAaW,QAApB;EACH;;EACDZ,OAAO,GAAE;IACLK,OAAO,CAACC,GAAR,CAAY,KAAKO,QAAL,EAAZ;IACA,IAAG,KAAKA,QAAR,EACI,OAAO,KAAKZ,KAAL,GAAaa,IAApB;IACJ,OAAO,CAAP;EACH;;EACDD,QAAQ,GAAE;IACN,MAAMP,GAAG,GAAGH,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;IACA,OAAOE,GAAG,KAAK,KAAf;EACH;;EACDS,MAAM,GAAE;IACJZ,YAAY,CAACM,OAAb,CAAqB,UAArB,EAAiC,IAAjC;EACH;;AAjDY;;AAoDjB,eAAe,IAAIf,UAAJ,EAAf"},"metadata":{},"sourceType":"module"}